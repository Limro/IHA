\documentclass[Aflevering]{subfiles}
\begin{document}

\section{Systembeskrivelse}

Systemet er opbygget på STK-500 boarded, hvorpå der er tilkoblet forskellige elementer:

	\begin{itemize}
	\item Et LM75 print
	\item Et Dragonkit med et LCD162 påbygget.
	\item Et MC35i GSM modem
	\end{itemize}

På STK-500 boardet er der lagt software på, hvor styresystemet er FreeRTOS, version 7.1.0, samt drivers til Dragonkit'et, LED'er, UART'en og LM75 printet. 




\subsection{Hardware opbygning}
Kabler er forbundet som følger:
\\
\begin{tabular}{|c|c|c|c|c|}
\hline 
STK500 & LM75 & Dragon kit & MC35i & STK500 \\ 
\hline 
PORTA & • & Display & • & •\\ 
%\hline 
PB0 & • & • & • & RXD\\ 
%\hline 
PB1 & • & • & • & TXD\\ 
%\hline 
PB7 & • & Buzzer & • & •\\ 
%\hline 
PC0 & SCL & • & • & •\\ 
%\hline 
PC1 & SDA & • & • & •\\ 
%\hline 
PC8 og PC 9 & GND og VCC & • & • & •\\ 
%\hline 
RS232 Spare & • & • & RS232 input & •\\ 
\hline 
\end{tabular} 
\\
\\
Forbindelsen mellem STK-500's RS232 Spare og MC35i er med et 9-pinskabel, hvor pin 3 og 5 (RX og TX) er byttet rundt, således at microcontrolleren sender igennem TX og MC35i modtager i sin RX.




\subsection{Software design}

Softwaren er, som nævnt tidligere i afsnittet, skrevet oven på Free RTOS i \textit{C}.
Free RTOS giver mulighed for, at skrive i forskellige tråde, samt kommunikation med message queues. 
\\
Der er lavet en tråd til, at opsamle temperaturværdierne fra LM75-printet, og sender dette til en queue. Det valideres også om temperaturen har overskrevet en givet værdi, som derefter starter en buzzer i 2 sekunder. 
\\
\\
En anden tråd kigger hele tiden på førnævnte queue, og udskriver disse værdier til displayet og sender en besked til GSM-modemet for, at sende en SMS til brugeren.
\\
\\
Trådene og deres interaktion ses herunder:
\\







\end{document} 